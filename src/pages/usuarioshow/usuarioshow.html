<ion-header>
  <ion-navbar>
    <ion-title>Registro de Conta</ion-title>
  </ion-navbar>
</ion-header>

<ion-content padding>
  <ion-segment [(ngModel)]="step" color="dark">
    <ion-segment-button value="part1"> Identificação </ion-segment-button>
    <ion-segment-button value="part2"> Endereço </ion-segment-button>
  </ion-segment>
  <form [formGroup]="formTable" (ngSubmit)="formSubmit()">
    <div [ngSwitch]="step">
      <ion-grid *ngSwitchCase="'part1'">
        <ion-row>
          <ion-col no-padding text-center>
            <ion-item>
              <ion-input formControlName="cel" type="tel" placeholder="Nº Celular" mask="(00) 00000-0000">
              </ion-input>
            </ion-item>
            <ion-label color="danger"
              *ngIf="formTable.get('cel').invalid && (formTable.get('cel').dirty && formTable.get('cel').errors)">
              Nº Celular inválido</ion-label>
            <ion-item>
              <ion-input formControlName="email" type="email" placeholder="E-mail"></ion-input>
            </ion-item>            
              <ion-label color="danger"
              *ngIf="formTable.get('email').errors &&
              formTable.get('email').dirty &&
              formTable.get('email').errors.isvalid">
              E-mail inválido</ion-label>                  
            <ion-item>
              <ion-input formControlName="nome" type="text" placeholder="Nome"></ion-input>
            </ion-item>
            <ion-label color="danger"
              *ngIf="formTable.get('nome').invalid && (formTable.get('nome').dirty && formTable.get('nome').errors)">
              Nome inválido</ion-label>
            <ion-item>
              <ion-input formControlName="sobrenome" type="text" placeholder="Sobrenome"></ion-input>
            </ion-item>
            <ion-label color="danger"
              *ngIf="formTable.get('sobrenome').invalid && (formTable.get('sobrenome').dirty && formTable.get('sobrenome').errors)">
              Sobrenome inválido</ion-label>
            <ion-item>
              <ion-input formControlName="senha" type="password" placeholder="Senha"></ion-input>
            </ion-item>
            <ion-label color="danger"
              *ngIf="formTable.get('senha').invalid && (formTable.get('senha').dirty && formTable.get('senha').errors)">
              Senha deve conter 6 caracteres</ion-label>
            <ion-item>
              <ion-input formControlName="confirmarsenha" type="password" placeholder="Confirmar senha"></ion-input>
            </ion-item>
            <ion-label color="danger"
              *ngIf="formTable.get('confirmarsenha').invalid && (formTable.get('confirmarsenha').dirty && formTable.get('confirmarsenha').errors)">
              Senha deve conter 6 caracteres</ion-label>
              <ion-label color="danger"
              *ngIf="formTable.value.senha != formTable.value.confirmarsenha">
              Senhas divergentes</ion-label>
          </ion-col>
        </ion-row>
      </ion-grid>

      <ion-grid *ngSwitchCase="'part2'">
        <ion-row>
          <ion-col no-padding text-center>
            <ion-item>
              <ion-input formControlName="cep" type="text" placeholder="CEP" (ionChange)='cepOnChange($event)'
                mask="00000-000"></ion-input>
            </ion-item>
            <ion-label color="danger"
              *ngIf="formTable.get('cep').invalid && (formTable.get('cep').dirty && formTable.get('cep').errors)">
              CEP inválido</ion-label>
            <ion-item>
              <ion-input readonly formControlName="logradouro" type="text" placeholder="Rua/Avenida"></ion-input>
            </ion-item>
            <ion-item>
              <ion-input formControlName="numero" type="number" placeholder="Número"></ion-input>
            </ion-item>
            <ion-label color="danger"
              *ngIf="formTable.get('numero').invalid && (formTable.get('numero').dirty && formTable.get('numero').errors)">
              Número inválido</ion-label>
            <ion-item>
              <ion-input formControlName="complemento" type="text" placeholder="Complemento"></ion-input>
            </ion-item>
            <ion-item>
              <ion-input readonly formControlName="bairro" type="text" placeholder="Bairro"></ion-input>
            </ion-item>
            <ion-item>
              <ion-input readonly formControlName="estado" type="text" placeholder="Estado"></ion-input>
            </ion-item>
            <ion-item>
              <ion-input readonly formControlName="municipio" type="text" placeholder="Município"></ion-input>
            </ion-item>
          </ion-col>
        </ion-row>
      </ion-grid>
    </div>   
    <button ion-button type="submit" block color="dark" [disabled]="!formTable.valid">Confirmar</button>
    <!-- <button ion-button type="submit" block color="dark">Confirmar</button> -->
  </form>
</ion-content>